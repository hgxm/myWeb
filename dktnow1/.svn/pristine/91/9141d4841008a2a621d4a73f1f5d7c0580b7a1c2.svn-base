//
//  ReadOverView.m
//  ClassRoomTeacher
//
//  Created by apple  on 13-8-26.
//  Copyright (c) 2013年 apple . All rights reserved.
//

#import "ReadOverView.h"

@implementation ReadOverView
@synthesize delegate;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        
        statue = 4;
        // Initialization code
        blackView = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 1024, 748)];
        blackView.backgroundColor = [UIColor blackColor];
        blackView.alpha = 0.5;
        [self addSubview:blackView];
        [blackView release];
        
        contentImage = [[UIImageView alloc]initWithFrame:CGRectMake(1024/2-520/2, 60, 520, 340)];
        contentImage.image = [UIImage imageNamed:@"批阅底图.png"];
        contentImage.userInteractionEnabled = YES;
        [self addSubview:contentImage];
        [contentImage release];
        
        textView = [[UITextView alloc]initWithFrame:CGRectMake(20, 20, 480, 120)];
        textView.layer.borderColor = MYCOLOR.CGColor;
        textView.layer.borderWidth = 1.0;
        textView.text = @"";
        textView.font = [UIFont systemFontOfSize:20];
        [textView becomeFirstResponder];
        [contentImage addSubview:textView];
        [textView release];
        
        UILabel *lbl = [[UILabel alloc]initWithFrame:CGRectMake(20, 145, 40, 30)];
        lbl.backgroundColor = [UIColor clearColor];
        lbl.text = @"打分:";
        lbl.textColor = [UIColor lightGrayColor];
        [contentImage addSubview:lbl];
        [lbl release];
        
        
        scoreLbl = [[UILabel alloc]initWithFrame:CGRectMake(70, 145, 60, 30)];
        scoreLbl.backgroundColor = [UIColor clearColor];
        scoreLbl.text = @"0分";
        scoreLbl.textColor = MYCOLOR;
        [contentImage addSubview:scoreLbl];
        [scoreLbl release];
        
        UISlider *slider = [[UISlider alloc]initWithFrame:CGRectMake(120, 150, 200, 10)];
        slider.minimumValue = 0;
        slider.maximumValue = 100;
        //[slider setMinimumTrackTintColor:MYCOLOR];
        [slider addTarget:self action:@selector(sliderchanged:) forControlEvents:UIControlEventValueChanged];
        [contentImage addSubview:slider];
        [slider release];
        
        for (int i = 0; i<2; i++) {
            UIButton *selectBtn = [[UIButton alloc]initWithFrame:CGRectMake(10+i*120, 190, 90, 40)];
            [selectBtn setImageEdgeInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
            [selectBtn setTitleEdgeInsets:UIEdgeInsetsMake(0, 30, 0, 0)];
            if (i==0) {
                [selectBtn setTitle:@"通过" forState:UIControlStateNormal];
                [selectBtn setImage:[UIImage imageNamed:@"练习选择1.png"] forState:UIControlStateNormal];

            }else{
                [selectBtn setTitle:@"重做" forState:UIControlStateNormal];
                [selectBtn setImage:[UIImage imageNamed:@"练习选择.png"] forState:UIControlStateNormal];

            }
            selectBtn.tag = i+10;
            [selectBtn addTarget:self action:@selector(selectBtnAction:) forControlEvents:UIControlEventTouchUpInside];
            [selectBtn setTitleColor:[UIColor lightGrayColor] forState:UIControlStateNormal];
            [contentImage addSubview:selectBtn];
            [selectBtn release];
            
        }
        
        UIButton *btnSure = [[UIButton alloc]initWithFrame:CGRectMake(90, 270, 342, 42)];
        [btnSure setImage:[UIImage imageNamed:@"提交批阅.png"] forState:UIControlStateNormal];
        [btnSure addTarget:self action:@selector(btnSureAction) forControlEvents:UIControlEventTouchUpInside];
        [contentImage addSubview:btnSure];
        [btnSure release];
        
        
    }
    return self;
}
-(void)selectBtnAction:(UIButton *)btn{
    
    [btn setImage:[UIImage imageNamed:@"练习选择1.png"] forState:UIControlStateNormal];

    
    if (btn.tag == 10) {
        statue = 4;
        UIButton *btn11 = (UIButton *)[contentImage viewWithTag:11];
        [btn11 setImage:[UIImage imageNamed:@"练习选择.png"] forState:UIControlStateNormal];

    }else{
        
        statue = 2;
        UIButton *btn10 = (UIButton *)[contentImage viewWithTag:10];
        [btn10 setImage:[UIImage imageNamed:@"练习选择.png"] forState:UIControlStateNormal];
    }
}
-(void)sliderchanged:(UISlider *)slider{
    
    score = (int)slider.value;
    scoreLbl.text = [NSString stringWithFormat:@"%d分",score];
}


-(void)btnSureAction{
    
    if (delegate&&[delegate respondsToSelector:@selector(clickSure:mark:statue:)]) {
        [delegate clickSure:score mark:textView.text statue:statue];
    }
}
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    UITouch *touch = [touches anyObject];
    if ([touch view] == blackView) {
        [self removeFromSuperview];
    }
}

-(void)dealloc{
    
    [super dealloc];
}
/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end

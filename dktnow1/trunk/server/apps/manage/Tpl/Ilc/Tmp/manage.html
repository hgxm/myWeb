<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <load href="__PUBLIC__/Css/Ilc/header.css,__PUBLIC__/Css/Ilc/public.css"/>
    <load href="__PUBLIC__/Js/Public/jquery-1.9.1.js,__PUBLIC__/Js/Public/jquery-ui.js,__PUBLIC__/Js/Public/public.js"/>
    <style  type="text/css">
        body{width:100%;height:auto;}
        .drag {position:absolute;width:auto;height:auto;background:#b;border:1px solid #b3b3b3;border-radius:5px;box-shadow:0 1px 3px 2px #b3b3b3;}
        .drag .title {width:100%;height:27px;border-bottom:1px solid #A1B4B0;cursor:move;}
        .drag .title h2{font-size:14px;height:27px;line-height:24px;margin-left:10px;}
        .drag .title a{float:right;width:21px;height:19px;display:block;margin:4px 5px 0px 0px;background:url("/Public/Images/Ilc/new_tool.png") no-repeat;}
        .drag .title .a_min{background-position:-29px 0;}
        .drag .title .a_min:hover{background-position:-29px -29px;}
        .drag .title .a_max{background-position:-60px 0;}
        .drag .title .a_max:hover{background-position:-60px -29px;}
        .drag .title .a_revert{background-position:-149px 0;display:none;}
        .drag .title .a_revert:hover{background-position:-149px -29px;}
        .drag .title .a_close{background-position:-89px 0;}
        .drag .title .a_close:hover{background-position:-89px -29px;}
        .drag .content { width:96%;margin:0px auto;}
    </style>
    <script type="text/javascript">
         $(function(){

            //拖拽
            $(".drag").draggable({containment:'parent'});
            //弹窗定义 left，top 值
            var mar_top = (document.documentElement.clientHeight - $('.drag').height()) / 2;
            var mar_left = (document.documentElement.clientWidth - $('.drag').width()) / 2;
            $('.drag').css({'left':mar_left,'top':mar_top});
            
            //最小化
            $(document).on('click','.drag .a_min',function(){

                var num = $(this).parents('.drag').attr('attr');
                alert(num)
                //$(this).parents('.drag').hide();
            })
            //最大化
            $(document).on('click','.drag .a_max',function(){

                max(this)
            })
            //还原
            $(document).on('click','.drag .a_revert',function(){

                revert(this)
            })
            //关闭
            $(document).on('click','.a_close',function(){
                $(this).parents('.drag').remove();
            })
            //头部点击
            $(document).on('dblclick','.drag .title',function(){

                if($(this).parent('div').hasClass('drag_on')) {
                    revert($(this).children('.a_revert'));
                }else{
                    max($(this).children('.a_max'));
                }
            })
         })

         function max(now) {
            $('.drag').css('margin','0');
            var man_wid = document.documentElement.clientWidth - 2;
            var man_hei = document.documentElement.clientHeight - 2;
            $(now).parents('.drag').css({'left':'0','top':'0'}).addClass('drag_on');
            $(now).parents('.drag').width(man_wid).height(man_hei);
            $(now).hide().siblings('.a_revert').show();
         }
         function revert(now) {
            $(now).parents('.drag').width('auto').height('auto');
            var mar_top = (document.documentElement.clientHeight - $('.drag').height()) / 2;
            var mar_left = (document.body.clientWidth - $('.drag').width()) / 2;
            $(now).parents('.drag').css({'left':mar_left,'top':mar_top}).removeClass('drag_on');
            $(now).hide().siblings('.a_max').show();
         }
    </script>
 </head>

 <body>
    <div class="drag">
        <div class="title">
            <h2 class="fl">这是一个可以拖动的窗口</h2>
            <a class="a_close" href="javascript:;" title="关闭"></a>
            <a class="a_max" href="javascript:;" title="最大化"></a>
            <a class="a_revert" href="javascript:;" title="还原"></a>
            <a class="a_min" href="javascript:;" title="最小化"></a>
        </div>
        <div class="clear"></div>
        <div class="content">
            ① 窗口可以拖动；<br />
            ② 窗口可以通过八个方向改变大小；<br />
            ③ 窗口可以最小化、最大化、还原、关闭；<br />
            ④ 限制窗口最小宽度/高度。
            <div style="width:800px;height:350px;"></div>
        </div>
    </div>
 </body>
</html>

//
//  StudentsView.m
//  ClassRoomTeacher
//
//  Created by apple  on 13-7-4.
//  Copyright (c) 2013å¹´ apple . All rights reserved.
//

#import "StudentsView.h"

@implementation StudentsView
@synthesize delegate;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        
        
        stuScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 10, 630, 140)];
        stuScroll.backgroundColor = [UIColor clearColor];
        [stuScroll setShowsVerticalScrollIndicator:NO];
        [self addSubview:stuScroll];
        [stuScroll release];
        
        
    }
    return self;
}
-(void)loadScroll:(NSMutableArray *)muArr{
    
    
    for (UIView * v in [stuScroll subviews]) {
        [v removeFromSuperview];
    }
    for (int i=0; i<[muArr count]; i++) {
        
        NSDictionary *dict = [muArr objectAtIndex:i];
        
        UIButton *btnStu = [[UIButton alloc]initWithFrame:CGRectMake(i%5*125, i/5*48, 115, 38)];
        btnStu.tag = i+1;
        [btnStu setTitle:[dict objectForKey:@"a_nickname"] forState:UIControlStateNormal];
        btnStu.titleLabel.font = [UIFont boldSystemFontOfSize:14];
        if ([[dict objectForKey:@"hd_status"] intValue]!=0) {
            
            btnStu.backgroundColor = [UIColor colorWithRed:109.0/255 green:173.0/255 blue:91.0/255 alpha:1];
            [btnStu setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
            
        }else{
            btnStu.backgroundColor = [UIColor colorWithRed:200.0/255 green:200.0/255 blue:200.0/255 alpha:200.0/255];
            [btnStu setTitleColor:[UIColor grayColor] forState:UIControlStateNormal];
            
        }
        [btnStu addTarget:self action:@selector(selectStudent:) forControlEvents:UIControlEventTouchUpInside];
        [stuScroll addSubview:btnStu];
        [btnStu release];
    }
    
    [stuScroll setContentSize:CGSizeMake(115, ([muArr count]/5+1)*48)];
}
-(void)selectStudent:(UIButton *)btn{
    
    if (delegate && [delegate respondsToSelector:@selector(teacherSelectStudent:)]) {
        [delegate teacherSelectStudent:btn.tag-1];
    }
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end

<include file="Public:header"/>
<load href="__PUBLIC__/Css/Home/myres.css"/>

<!--多文件上传plupload插件开始-->
<link rel="stylesheet" href="/Public/Js/Public/plupload/jquery.plupload.queue/css/jquery.plupload.queue.css">
<script type="text/javascript" src="/Public/Js/Public/plupload/plupload.full.js"></script>
<script type="text/javascript" src="/Public/Js/Public/plupload/jquery.plupload.queue/jquery.plupload.queue.js"></script>
<script type="text/javascript" src="/Public/Js/Public/plupload/i18n/zh-cn.js"></script>
<!--多文件上传plupload插件结束-->

<script type="text/javascript">
<!--
    $(function(){

        //资源多文件上传
        reloadFileUpload();

    })

    // 初始化多文件上传
    function reloadFileUpload(){
        var maxSize = 20;
        $("#uploader").pluploadQueue({
            // General settings
            runtimes : 'html4,html5,flash,silverlight,gears,browserplus',
            url : '',
            max_file_size : maxSize+'mb',
            chunk_size : '10mb',
            unique_names : true,

            // Resize images on clientside if we can
            resize : {width : 320, height : 240, quality : 90},
            dragdrop : true,
            // Specify what files to browse for
            filters : [
                {title : "Image files", extensions : "png,jpg,gif,bmp,jpeg"},
                {title : "Zip files", extensions : "zip,rar"},
                {title : "Audio files", extensions : "mp3,m4a,m4v"},
                {title : "Mindmark files", extensions : "db"},
                {title : "Video files", extensions : "mpeg,mp4,avi,rmvb,rm,wmv,fla,3gp,flv"},
                {title : "Docs files", extensions : "txt,doc,xls,ppt,docx,xlsx,pptx,pdf"}
            ],

            // Flash settings
            flash_swf_url : '/Public/Js/Public/plupload/plupload.flash.swf',

            // Silverlight settings
            silverlight_xap_url : '/Public/Js/Public/plupload/plupload.silverlight.xap',
            init: {
                FileUploaded: function(up, file, info) {
                    var reg = /error(.*)<\/p>/ig;
                    var res = info.response.match(reg);
                    if (res) {
                        var str = res.toString();
                        alert(str.slice(7,-4));
                        location.reload(true);
                    }
                }
            }
        })
    }
//-->
</script>
<div class="wrap">
    <div class="upload_area">
        <div class="uplod_top">
            <a class="upload_res"></a>
        </div>
        <div class="upload_box">
            <div id="uploader">
                <p>上传资源控件加载错误，可能是您的浏览器不支持 Flash, Silverlight, Gears, BrowserPlus 或 HTML5，请检查</p>
            </div>
            <div class="warn_word">
                资源上传须知：<br/>
                1.请不要上传侵犯他人版权的文件<br/>
                2.每份文档不超过{$maxSize}M
            </div>
            <div class="clear"></div>
            <div class="finish">
                <button class="finish_btn"></button>
            </div>
        </div>
    </div>
</div>
<include file="Public:footer"/>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 4.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=9" />
    <meta http-equiv="Access-Control-Allow-Origin" content="*">
    <script type="text/javascript" src="./Js/jquery-1.9.1.js" ></script>
    <script type="text/javascript" src="./Js/public.js" ></script>
    <link href="./Css/public.css" type="text/css" rel="stylesheet">
    <link href="./Css/show.css" type="text/css" rel="stylesheet">
    <link href="./Css/jquery-ui.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="./Js/jquery-ui.js" ></script>
    <script type="text/javascript" src="./Js/flexPlugin/js/flexpaper.js"></script>
    <script type="text/javascript" src=" ./Js/flexPlugin/js/flexpaper_handlers.js"></script>
    <link rel="stylesheet" type="text/css" href="./Js/jplayer/skin/jplayer.blue.monday.css" />
    <script type="text/javascript" src="./Js/jplayer/js/jquery.jplayer.min.js"></script>
    <script type="text/javascript" src="./Js/ckplayer/ckplayer.js"></script>

    <!--[if IE 6]>
    <script type="text/javascript" src="./Js/png.js" ></script>
    <script type="text/javascript">
        DD_belatedPNG.fix('#logo,.cShare,.cEdit,.cIn,.cClone,.cExport,.cDel,.fw_baoming_left,.fw_btn,.anli_ico_link,.anli_ico,.selected,.selected_green,.selected_gray,.to-left,.to-right,.current,.mt_tab li,.classhomework_top li,.choose_class,.current img,.res_click,.res_scan,.res_frame.png,#main_bg li img,.jCal .left,.jCal .right');
    </script>
    <![endif]-->
    <title>大课堂互动教学</title>
    <script>
        <!--//

            // 导航动画效果
            $(function(){

                $('#header li a').wrapInner('<span class="out"></span>');

                $('#header li a').each(function() {
                    $('<span class="over">' + $(this).text() + '</span>').appendTo(this);
                });

                $('#header li a').hover(function() {
                    $('.out',this).stop().animate({'top':'67px'},200);
                    $('.over',this).stop().animate({'top':'0px'},200);

                }, function() {
                    $('.out',this).stop().animate({'top':'0px'},200);
                    $('.over',this).stop().animate({'top':'-67px'},200);
                });
                
                $('#header li a').click(function(){

                    // 选中菜单项的样式
                    $(this).addClass('on').parent().siblings().find('a').removeClass('on');

                    // 恢复动画
                    $('.out',this).css('top','0px');
                    $('.over',this).css('top','-67px');
                    $(this).parent().siblings().find('a').hover(function(){
                        $('.out',this).stop().animate({'top':'67px'},200);
                        $('.over',this).stop().animate({'top':'0px'},200);
                    }, function() {
                        $('.out',this).stop().animate({'top':'0px'},200);
                        $('.over',this).stop().animate({'top':'-67px'},200);
                    })
                    // 停止当前点击导航的动画效果
                    $(this).hover(function(){
                        $('.out',this).stop();
                        $('.over',this).stop();
                    },function(){
                        $('.out',this).stop();
                        $('.over',this).stop();
                    })
                }).eq(0).click();
            })
        //-->
    </script>
</head>
<body id="body">
    <div id="header">
        <div>
            <a href="javascript:void(0);" id="logo"></a>
            <ul class="nav">
                <li><a href="javascript:;">课程超市</a></li>
                <li><a href="javascript:;">我的空间</a></li>
                <li><a href="javascript:;">资源中心</a></li>
                <li><a href="javascript:;">应用中心</a></li>
            </ul>
            <a href="javascript:void(0);" class="download">iPhone客户端下载</a>
        </div>
    </div>
        <script type="text/javascript" language="javascript">

        $(function () {

            // 页面url传有4，则说明是文档
            if (getParameter('mid') == 4) {
                controllStyle('document');

            // 页面url传有3，则说明是音频
            } else if (getParameter('mid') == 3) {
                controllStyle('audio');

            // 页面url传有2，则说明是视频
            } else if (getParameter('mid') == 2) {
                controllStyle('video');

            // 页面url传有1，则说明是图片
            } else if (getParameter('mid') == 1) {
                controllStyle('image');
                var str = getParameter('src');
                if (str.indexOf('./Resource/') == -1) {
                    $('.image .show_box img').attr('src', './Resource/600/' + getParameter('src'));
                } else {
                    $('.image .show_box img').attr('src', str.replace('./Resource/', './Resource/600/'));
                }


            // 没有传，则什么也不显示
            } else {
                $('.res_info').html('');
            }

            // 音频播放器
            $("#jquery_jplayer_1").jPlayer({
                ready: function () {
                    $(this).jPlayer("setMedia", {
                        m4v: getParameter('src'),
                        poster: "http://www.jplayer.org/video/poster/Big_Buck_Bunny_Trailer_480x270.png"
                    });
                },
                swfPath: "js",
                supplied: "m4v",
                size: {
                    width: "700px",
                    height: "360px",
                    cssClass: "jp-video-360p"
                }
            });
        })

        // 获取url传参
        function getParameter(param) {
            var query = window.location.search;
            query = '&' + query.slice(1);
            param = '&' + param + '=';
            var iLen = param.length;
            var iStart = query.indexOf(param);
            if (iStart == -1) {
                return "";
            }
            iStart += iLen;
            var iEnd = query.indexOf("&", iStart);
            if (iEnd == -1) {
                return query.substring(iStart);
            }
            return query.substring(iStart, iEnd);
        }

        // 展示相应的区域
        function controllStyle(info) {
            $('.libox li').each(function () {
                if ($(this).hasClass(info)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            })
        }
        var flashvars={
                f:window.location.pathname.slice(0,-9) + 'Resource/' + getParameter('src'),//视频地址
                c:'0',
                e:'1',//视频结束后的动作，0是调用js函数，1是循环播放，2是暂停播放，3是调用视频推荐列表的插件，4是清除视频流并调用js功能和1差不多
                p:'1',//视频默认0是暂停，1是播放
                g:'0',//视频直接g秒开始播放
                };
            var params={bgcolor:'#FFF',allowFullScreen:true,allowScriptAccess:'always'};
            var attributes={id:'ckplayer_a1',name:'ckplayer_a1'};
            swfobject.embedSWF('./Js/ckplayer/ckplayer.swf', 'a1', '598', '408', '10.0.0','./Js/ckplayer/expressInstall.swf', flashvars, params, attributes); //播放器地址，容器id，宽，高，需要flash插件的版本，flashvars,params,attributes

            var watchtime;
            var wattime=-1;
            var watt=false;//默认没有计时
            var ptime=0;
            function aboutstr(str,f) {
                //查看str字符里是否有f
                var about=false;
                var strarray=new Array();
                var farray=new Array();
                farray=f.split(",");
                if(str) {
                    for(var i=0;i<farray.length;i++){
                        strarray=str.split(farray[i]);
                        if(strarray.length>1){
                            about=true;
                            break;
                        }
                    }
                }
                return about;
            }

        // 实时的监听播放器里各状态的值
        function ckplayer_status(str){

            if(str=='103' || str=='101'){
                if(watt){
                    watt=false;
                    window.clearInterval(watchtime);
                }
            }
            // 获取当前播放时间
            if(aboutstr(str,'nowtime:')){
                ptime = parseInt(str.replace('nowtime:',''));
                var twoStep  = ptime.toFixed(2);
                var millisecond = parseFloat(twoStep)*1000;
                var newTime = new Date(millisecond);
                var hours = parseFloat(newTime.getHours() - 8);
                var minutes = parseFloat(newTime.getMinutes());
                var second = parseFloat(newTime.getSeconds());
                if (hours < 10) {
                    hours = '0' + parseFloat(newTime.getHours() - 8);
                }
                if (minutes < 10) {
                    minutes = '0' + newTime.getMinutes();
                }
                if (second < 10) {
                    second = '0' + newTime.getSeconds();
                }
                var formatTime = hours + ":" + minutes + ':' + second;
                document.getElementById('currentTime').innerHTML = formatTime;
            }
        }

        // 暂停视频并获取当前播放时间点
        function getTime(){
            swfobject.getObjectById('ckplayer_a1').ckplayer_pause();
        }
    </script>
    <div class='warp'>
        <div class="res_right">
            <ul class="res_info libox">

                <!--图片-->
                <li class="image">
                    <label>资源预览：</label>
                    <div class="show_box">
                        <img src="" />
                    </div>
                </li>

                <!--视频-->
                <li class="video">
                    <div>
                        <span class="la_bar">资源预览：</span>
                        <a class="msg" target="_blank" href="./Images/auto_play.jpg">若文档显示不出，请点击此处进行设置</a>
                    </div>
                    <div class="show_box">
                        <div class="r_play">
                            <div id="video"><div id="a1"></div></div>
                        </div>
                    </div>
                </li>
                <!--音频-->
                <li class="audio">
                    <label>资源预览：</label>
                    <div class="show_box">
                        <!-- 音频播放 -->
                        <div id="jp_container_1" class="jp-video jp-video-360p" style="width:700px;">
                            <div class="jp-type-single">
                                <div id="jquery_jplayer_1" class="jp-jplayer"></div>
                                <div class="jp-gui">
                                    <div class="jp-video-play">
                                        <a href="javascript:;" class="jp-video-play-icon" tabindex="1">play</a>
                                    </div>
                                    <div class="jp-interface">
                                        <div class="jp-progress">
                                            <div class="jp-seek-bar">
                                                <div class="jp-play-bar"></div>
                                            </div>
                                        </div>
                                        <div class="jp-current-time"></div>
                                        <div class="jp-duration"></div>
                                        <div class="jp-controls-holder">
                                            <ul class="jp-controls">
                                                <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
                                                <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
                                                <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
                                                <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
                                                <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
                                                <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
                                            </ul>
                                            <div class="jp-volume-bar">
                                                <div class="jp-volume-bar-value"></div>
                                            </div>
                                            <ul class="jp-toggles">
                                                <li><a href="javascript:;" class="jp-full-screen" tabindex="1" title="full screen">full screen</a></li>
                                                <li><a href="javascript:;" class="jp-restore-screen" tabindex="1" title="restore screen">restore screen</a></li>
                                                <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
                                                <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
                                            </ul>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
                <!--文档-->
                <li class="document">
                    <div>
                        <span class="la_bar">资源预览：</span>
                        <a class="msg" target="_blank" href="./Images/auto_play.jpg">若文档显示不出，请点击此处进行设置</a>
                    </div>
                    <div class="show_box">
                        <div id="documentViewer" class="flexpaper_viewer"></div>
                        <script type="text/javascript">
                            var src = getParameter('src').split('.');
                            $('#documentViewer').FlexPaperViewer(
                                { config : {
                                    SWFFile :'./Resource/' + src[0] + '.swf',
                                    Scale : 0.6,
                                    ZoomTransition : 'easeOut',
                                    ZoomTime : 0.5,
                                    ZoomInterval : 0.2,
                                    FitPageOnLoad : true,
                                    FitWidthOnLoad : false,
                                    FullScreenAsMaxWindow : false,
                                    ProgressiveLoading : false,
                                    MinZoomSize : 0.2,
                                    MaxZoomSize : 5,
                                    SearchMatchAll : false,
                                    InitViewMode : 'Portrait',
                                    RenderingOrder : 'flash,html',
                                    StartAtPage : '',
                                    ViewModeToolsVisible : true,
                                    ZoomToolsVisible : true,
                                    NavToolsVisible : true,
                                    CursorToolsVisible : true,
                                    SearchToolsVisible : true,
                                    WMode : 'window',
                                    localeChain: 'en_US'
                                }}
                            );
                        </script>
                    </div>
                    
                </li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
    <div class="foot_bot"></div>
    <div class="foot_top"></div>
    <div id="footer">
        <div class="nav back1"></div>
        Copyright &copy; 2007-2011 北京金商祺移动互联 All Rights Reserved.
    </div>
</body>
</html>
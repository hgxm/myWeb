//
//  Stream.h
//  TestSocket
//
//  Created by apple  on 13-4-9.
//  Copyright (c) 2013å¹´ apple . All rights reserved.
//

#import <Foundation/Foundation.h>
#import <CFNetwork/CFNetwork.h>
#import <SystemConfiguration/SystemConfiguration.h>
#import <netinet/in.h>
#import <arpa/inet.h>
#import "AppDelegate.h"
#import "Reachability.h"
#define socket_port 8889
@interface Stream : NSObject<NSStreamDelegate>
{

    NSInputStream    *inStream;
    NSOutputStream    *outStream;
    NSMutableData    *dataBuffer;
    NSMutableData    *dataHead;
    
    BOOL            _hasEstablished;
    id                _currentObject;
    int                _numCondition;
    
    BOOL            _isFirstFourBytes;
    uint            remainingToRead;
    
    AppDelegate *dele;
    BOOL isFirst;
}
@property(nonatomic,assign)BOOL isFirst;
@property(nonatomic,assign)id _currentObject;
-(void)closeStreams;
+(Stream *)sharedStream;
-(void)start;
-(void)startClient;
-(void)requestData:(NSString *)requestString whoRequest:(id)currentObject condition:(int)numCondition;
-(void)manageData:(NSData *)receivedData;
@end

//
//  AouthViewController.m
//  ClassRoomTeacher
//
//  Created by apple  on 13-7-24.
//  Copyright (c) 2013年 apple . All rights reserved.
//

#import "AouthViewController.h"

@interface AouthViewController ()

@end

@implementation AouthViewController
@synthesize strURL;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    
    
    
    
    self.view.backgroundColor=[UIColor colorWithRed:237.0/255 green:239.0/255 blue:245.0/255 alpha:1];
    
    dele=[[UIApplication sharedApplication]delegate];
    
    backImageView=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 1024, 748)];
    [self.view addSubview:backImageView];
    [backImageView release];
    
    [NSThread detachNewThreadSelector:@selector(didloadimage) toTarget:self withObject:nil];

    
    draw=[[ACEDrawingView alloc]initWithFrame:CGRectMake(0, 0, 1024, 748)];
    [self.view addSubview:draw];
    [draw release];
    
   
    for (int i=0; i<2; i++) {
        UIButton *btn = [[UIButton alloc] initWithFrame:CGRectMake(920+i*50, 10, 35, 35)];
        btn.backgroundColor = [UIColor clearColor];
        [btn addTarget:self action:@selector(btnselect:) forControlEvents:UIControlEventTouchDown];
        btn.tag = 100+i;
       
        switch (i) {
            case 0:
                [btn setImage:[UIImage imageNamed:@"画笔2.png"] forState:UIControlStateNormal];
                break;
            case 1:
                [btn setImage:[UIImage imageNamed:@"homework橡皮1.png"] forState:UIControlStateNormal];
                break;
                
                          
            default:
                break;
        }
        [self.view addSubview:btn];
        [btn release];
    }

	// Do any additional setup after loading the view.
}
-(void)btnselect:(UIButton *)btn{
    
    
    if (btn.tag == 100) {
        

        draw.lineColor = [UIColor blueColor];
        draw.lineWidth = 5;
        draw.type = 1;
        
//        float r,g,b;
//        r = [[[NSUserDefaults standardUserDefaults]objectForKey:@"color_r"] floatValue];
//        g = [[[NSUserDefaults standardUserDefaults]objectForKey:@"color_g"] floatValue];
//        b = [[[NSUserDefaults standardUserDefaults]objectForKey:@"color_b"] floatValue];
//        UIColor *color = [UIColor colorWithRed:r green:g blue:b alpha:1];
//        smoothView.lineColor = color;
//        smoothView.lineWidth = [[[NSUserDefaults standardUserDefaults] objectForKey:@"width"] floatValue];
//        
        
        [btn setImage:[UIImage imageNamed:@"画笔2.png"] forState:UIControlStateNormal];
        
        [((UIButton *)[self.view viewWithTag:101]) setImage:[UIImage imageNamed:@"homework橡皮1.png"] forState:UIControlStateNormal];
        
    }else if(btn.tag == 101){
        
        
        draw.lineColor = [UIColor clearColor];
        draw.lineWidth = 20;
        draw.type = 2;
//        statue = btn.tag;
//        
//        
//        smoothView.lineWidth = [[[NSUserDefaults standardUserDefaults] objectForKey:@"clear_width"] floatValue];
//        smoothView.lineColor = [UIColor clearColor];
//        
        [btn setImage:[UIImage imageNamed:@"橡皮2.png"] forState:UIControlStateNormal];
        [((UIButton *)[self.view viewWithTag:100]) setImage:[UIImage imageNamed:@"homework画笔1.png"] forState:UIControlStateNormal];
       
        
        
        
    }
}



-(void)didloadimage{
    
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc]init];
    
    NSData *data = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@",dele.server_Address_str,strURL]]];
    backImageView.image = [[UIImage alloc]initWithData:data];

    [pool release];
}


-(void)dealloc{

    [strURL release];
    [super dealloc];
    
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end

//
//  FileManageUnit.m
//  Photos
//
//  Created by 伊辉 张 on 12-4-16.
//  Copyright (c) 2012年 __MyCompanyName__. All rights reserved.
//

#import "FileManageUnit.h"

@implementation FileManageUnit
//把url进行截取，只拿最后的一部分作为文件名字来处理
+(NSString *)getFile:(NSString *)strURL{
    

    
    NSMutableArray *muArr=(NSMutableArray *)[strURL componentsSeparatedByString:@"/"];
    if ([muArr count]>4&&muArr) {
        
        NSString *strPath=[NSString stringWithFormat:@"%@/%@",[muArr objectAtIndex:([muArr count]-3)],[muArr objectAtIndex:([muArr count]-2)]];
        
         NSString *filePath=[self getFilePath:strPath fileName:[muArr objectAtIndex:([muArr count]-1)]];
         return filePath;
    }
    return nil;
   
    
   
    
}
//判断文件是否存在
+(BOOL)fileIsExist:(NSString *)strURL{
    

	NSFileManager *fm=[NSFileManager defaultManager];
	BOOL exists=[fm fileExistsAtPath:strURL];
    
    return exists;
}

+(NSString *)getFilePath:(NSString *)strGroup fileName:(NSString *)strFile{


    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *documentsDir=[paths objectAtIndex:0];
    NSString *filePath=[documentsDir stringByAppendingPathComponent:strGroup];
    NSError *error;
    [[NSFileManager defaultManager] createDirectoryAtPath:filePath withIntermediateDirectories:YES attributes:nil error:&error];

    filePath=[filePath stringByAppendingPathComponent:strFile];

    return filePath;
}
@end
